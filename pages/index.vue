<template>
  <div class="scroll-container">
    <div class="image-scroll absolute top-60 left-1/2 -translate-x-1/2 z-50">
      <img src="/public/svg/logo-big.svg" class="image" />
    </div>
    
    <div ref="contentSection" class="content-section relative pt-80 px-[25px]">
      <div ref="textElement" class="text font-light  uppercase text-8xl relative opacity-0">
        <p>
        La plus grande agence marketing entre Montréal et Québec
      </p>
      </div>
      
      <div class="body-content space-y-4 ">
        <img src="/img/talent_home.jpg" class="rounded-2xl h-full relative" />
        <div class="w-[60%] ">
           <span class="w-full text-[45px]">
          Acolyte est une fière agence marketing employant une quarantaine de talents et implantée à Trois‑Rivières depuis plusieurs décennies. Chaque jour, on remue ciel et terre pour transformer des entreprises en marques comme si c’était les nôtres. On incarne la co‑création pour accompagner nos partenaires dans leurs démarches stratégiques, créatives et numériques.
        </span>
        </div>
       <img src="/svg/trois-riviere.svg" class="absolute w-50 h-14 top-[1210px] rotate-12 right-20" />
      </div>
      <div class="mt-40">
        <span class="text-7xl">EXPERTISES</span>
        <div class="flex gap-4 mt-10">
           <div class="flex flex-col gap-6">
                      <img src="/img/web1.webp" class="rounded-2xl" />
                <span class="text-3xl">MARQUE</span>
              <p class="text-sm">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
              <div class="flex gap-2 items-center">
                <span>Découvir</span>

                <img src="/svg/arrow-right.svg" />
              </div>
           </div>
           <div class="flex flex-col gap-6">
                      <img src="/img/web2.webp" class="rounded-2xl" />
                <span class="text-3xl">MARQUE</span>
              <p class="text-sm">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
              <div class="flex gap-2 items-center">
                <span>Découvir</span>

                <img src="/svg/arrow-right.svg" />
              </div>
           </div>
           <div class="flex flex-col gap-6">
                      <img src="/img/web3.webp" class="rounded-2xl" />
                <span class="text-3xl">MARQUE</span>
              <p class="text-sm">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
              <div class="flex gap-2 items-center">
                <span>Découvir</span>

                <img src="/svg/arrow-right.svg" />
              </div>
           </div>
           <div class="flex flex-col gap-6">
                      <img src="/img/web4.webp" class="rounded-2xl" />
                <span class="text-3xl">MARQUE</span>
              <p class="text-sm">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
              <div class="flex gap-2 items-center">
                <span>Découvir</span>

                <img src="/svg/arrow-right.svg" />
              </div>
           </div>
     
        </div>
       
      </div>
     <div class="mt-40">
  <span class="text-7xl">PROJETS</span>
  <div class="flex gap-4 mt-10">
    <div class="flex flex-col gap-2">
      <!-- Conteneur de l'image avec overflow-hidden -->
      <div class="relative overflow-hidden rounded-2xl">
        <img 
          src="/img/web1.webp" 
          class="rounded-2xl object-cover w-full h-full transition-transform duration-500 hover:scale-110" 
        />
      </div>
       <div class="flex gap-4 mt-2 items-center">
        <span class="text-2xl uppercase">Découvir</span>
        <img src="/svg/arrow-right.svg" class="w-6"/>
      </div>
      <p class="w-[80%]">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
     
    </div>

  <div class="flex flex-col gap-2">
      <!-- Conteneur de l'image avec overflow-hidden -->
      <div class="relative overflow-hidden rounded-2xl">
        <img 
          src="/img/web2.webp" 
          class="rounded-2xl object-cover w-full h-full transition-transform duration-500 hover:scale-110" 
        />
      </div>
       <div class="flex gap-4 mt-2 items-center">
        <span class="text-2xl uppercase">Découvir</span>
        <img src="/svg/arrow-right.svg" class="w-6"/>
      </div>
      <p class="w-[80%]">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
     
    </div>
    
  </div>
   <div class="flex flex-col gap-2 mt-40">
      <!-- Conteneur de l'image avec overflow-hidden -->
      <div class="relative overflow-hidden rounded-2xl">
        <img 
          src="/img/web2.webp" 
          class="rounded-2xl object-cover w-full h-[80vh] transition-transform duration-500 hover:scale-110" 
        />
      </div>
       <div class="flex gap-4 mt-2 items-center">
        <span class="text-2xl uppercase">Découvir</span>
        <img src="/svg/arrow-right.svg" class="w-6"/>
      </div>
      <p class="w-[80%]">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
     
    </div>
</div>
 <div class="mt-40">
            <p class="w-[40%] text-lg uppercase">Notre agence de communications imagine des marques ancrées dans les réels besoins de nos partenaires.</p>
            <div class="flex gap-4">
              <div class="w-1/2 relative"><img src="/img/interieur.webp" class="rounded-2xl w-full  h-[600px] object-cover"/><img class="absolute bottom-20 right-10 -rotate-12 w-40 h-auto" src="/svg/approche.svg" />
</div>
                    <div class="w-1/2 flex flex-col items-start justify-between">
                              <div>
                                <span class="uppercase text-7xl">définir</span>
                                <p>Comprendre d'ou ou vient et ou on s'en va</p>
                              </div>
                              <div>
                                <span class="uppercase text-7xl">créer</span>
                                <p>Comprendre d'ou ou vient et ou on s'en va</p>
                              </div>
                              <div>
                                <span class="uppercase text-7xl">propulser</span>
                                <p>Comprendre d'ou ou vient et ou on s'en va</p>
                              </div>
                              <button class="p-2 px-4 border text-white bg-black rounded-full">
                                Notre approche vue de plus proche
                              </button>
                            </div>

            </div>
    </div>

    <div class="mt-40">
      <div class="space-y-4 relative">
        <span class="text-7xl uppercase">l'horizon</span>
        <p class="uppercase text-xl">Longue vue sur nos projets à venir</p>
        <img class="w-40 absolute top-40 left-20 -rotate-12" src="/svg/approche.svg" />
      </div>
      <div class="flex flex-col mt-20 gap-14 items-end">
       <div class="w-[70%]  pb-14 border-b pr-20 border-black custom-cursor">
  <span class="text-4xl">Une campagne quatre saisons pour ceux et celles qui aiment jouer dehors à l’année.</span>
</div>
        <div class="w-[70%]  pb-14 border-b  pr-20 border-black">
          <span class="text-4xl">Une campagne quatre saisons pour ceux et celles qui aiment jouer dehors à l’année.</span>
        </div>
        <div class="w-[70%] pb-14  border-b  pr-20 border-black">
          <span class="text-4xl">Une campagne quatre saisons pour ceux et celles qui aiment jouer dehors à l’année.</span>
        </div>
      </div>
    </div>
    </div>
   
  </div>
  
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue';
import { useNuxtApp } from '#app';

const { $gsap } = useNuxtApp();
const contentSection = ref(null);
const textElement = ref(null);
let scrollTrigger = null;

onMounted(() => {
  if ($gsap) {
    // Animation pour l'image
    $gsap.fromTo(
      '.image',
      { y: 0 },
      {
        y: -1000,
        ease: 'none',
        scrollTrigger: {
          trigger: '.scroll-container',
          start: 'top top',
          end: 'bottom top',
          scrub: true,
        }
      }
    );

    // Animation pour le paragraphe et gestion de la position de content-section
    scrollTrigger = $gsap.fromTo(
      textElement.value,
      { opacity: 0 },
      {
        opacity: 1,
        ease: 'none',
        scrollTrigger: {
          trigger: '.scroll-container',
          start: 'top top',
          end: '+=400 top', // Ajuste cette valeur si nécessaire
          scrub: true,
          onUpdate: (self) => {
            if (self.progress >= 1) {
              // Lorsque le texte est complètement visible, content-section est fixe jusqu'à ce que le texte soit visible
              contentSection.value.style.position = 'relative';
              contentSection.value.style.top = '400px';
            } else {
              // Lorsque le texte est encore invisible, la section est fixe
              contentSection.value.style.position = 'fixed';
              contentSection.value.style.top = '0';
            }
          }
        }
      }
    );
  } else {
    console.error('GSAP is not available.');
  }
});

onUnmounted(() => {
  if (scrollTrigger) {
    scrollTrigger.kill();
  }
});
</script>

<style scoped>
.scroll-container {
  position: relative;
  overflow: hidden;
  height:1000vh;
  min-height: 100vh; /* Assure-toi que la hauteur est suffisante pour permettre le défilement */
}

.image-scroll {
  width: 900px; /* Ajuste la taille si nécessaire */
}

.content-section {
  width: 100%;
  /* initial fixed position handled by JS */
}

.text {
  opacity: 0; /* Assure-toi que le texte commence avec une opacité de 0 */
}
</style>